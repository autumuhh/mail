<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maildrop - Admin Panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/admin.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='resources/favicon.ico') }}">
</head>
<body>
    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button class="theme-toggle" id="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
        <span class="icon sun-icon">â˜€ï¸</span>
        <span class="icon moon-icon">ğŸŒ™</span>
    </button>
    <div class="container">
        <header class="header">
            <h1>
                <img src="{{ url_for('static', filename='resources/mail-icon.svg') }}" alt="Mail Icon">
                maildrop admin
            </h1>
            <p>IP Whitelist Management</p>
        </header>
<!-- Login Section -->
        <section id="login-section" class="admin-panel">
            <h2>Admin Login</h2>
            <div class="form-group">
                <label for="admin-password">Admin Password:</label>
                <input type="password" id="admin-password" placeholder="Enter admin password">
            </div>
            <button id="login-btn" class="btn btn-primary">Login</button>
            <div id="login-error" class="error-message"></div>
        </section>
        <!-- Admin Panel -->
        <section id="admin-panel" class="admin-panel" style="display: none;">
            <div class="panel-header">
                <h2>IP Whitelist Settings</h2>
                <div class="panel-actions">
                    <div class="current-ip">
                        Your IP: <span id="current-ip">Loading...</span>
                    </div>
                    <div class="action-buttons">
                        <a href="/api-test" class="btn btn-primary">APIæµ‹è¯•</a>
                        <button id="logout-btn" class="btn btn-secondary">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
            </div>
            <!-- Whitelist Toggle -->
            <div class="form-group">
                <label class="toggle-label">
                    <input type="checkbox" id="whitelist-enabled">
                    <span class="toggle-slider"></span>
                    Enable IP Whitelist
                </label>
                <p class="help-text">When enabled, only IPs in the whitelist can send emails and access the API</p>
            </div>
            <!-- Whitelist IPs -->
            <div class="form-group">
                <label for="whitelist-ips">Allowed IPs and Networks:</label>
                <textarea id="whitelist-ips" rows="8" placeholder="127.0.0.1
::1
192.168.0.0/16
10.0.0.0/8"></textarea>
                <p class="help-text">
                    Enter one IP address or CIDR block per line.<br>
                    Examples: 127.0.0.1 (single IP), 192.168.1.0/24 (network), ::1 (IPv6)
                </p>
            </div>
            <!-- Test IP -->
            <div class="form-group">
                <label for="test-ip">Test IP Address:</label>
                <div class="test-ip-container">
                    <input type="text" id="test-ip" placeholder="Enter IP to test">
                    <button id="test-ip-btn" class="btn btn-secondary">Test</button>
                </div>
                <div id="test-result" class="test-result"></div>
            </div>
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="save-btn" class="btn btn-primary">Save Settings</button>
                <button id="reload-btn" class="btn btn-secondary">Reload</button>
            </div>
            <!-- Status Messages -->
            <div id="status-message" class="status-message"></div>
        </section>
        <!-- Quick Add Section -->
        <section id="quick-add" class="admin-panel" style="display: none;">
            <h3>Quick Add Common Networks</h3>
            <div class="quick-add-buttons">
                <button class="btn btn-secondary quick-add-btn" data-ip="127.0.0.1">Localhost IPv4</button>
                <button class="btn btn-secondary quick-add-btn" data-ip="::1">Localhost IPv6</button>
                <button class="btn btn-secondary quick-add-btn" data-ip="192.168.0.0/16">Private Network 192.168.x.x</button>
                <button class="btn btn-secondary quick-add-btn" data-ip="10.0.0.0/8">Private Network 10.x.x.x</button>
                <button class="btn btn-secondary quick-add-btn" data-ip="172.16.0.0/12">Private Network 172.16-31.x.x</button>
            </div>
        </section>
        <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
        <section id="quick-actions" class="admin-panel" style="display: none;">
            <h3>å¿«æ·æ“ä½œ</h3>
            <div class="quick-actions-grid">
                <a href="/api-test" class="btn btn-primary quick-action-btn">
                    <span class="btn-icon">ğŸ§ª</span>
                    <span class="btn-text">APIåŠŸèƒ½æµ‹è¯•</span>
                    <small>æµ‹è¯•é‚®ç®±åˆ›å»ºå’Œé‚®ä»¶å‘é€</small>
                </a>
                <a href="/" class="btn btn-secondary quick-action-btn">
                    <span class="btn-icon">ğŸ“§</span>
                    <span class="btn-text">ä¸´æ—¶é‚®ç®±</span>
                    <small>ç”Ÿæˆå’Œç®¡ç†ä¸´æ—¶é‚®ç®±</small>
                </a>
            </div>
        </section>
    </div>
    <script src="{{ url_for('static', filename='scripts/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/admin.js') }}"></script>
</body>
</html>
